"use strict";(self.webpackChunkbyteval_benchmark=self.webpackChunkbyteval_benchmark||[]).push([["517"],{6911:function(e,a,t){t.r(a),t.d(a,{default:()=>V});var r=t("11527"),s=t("94833"),l="back-header-placeholder-NrJZhJ",o="back-header-YsyVsw",n="btn-fNQsUt",i="icon-vKyAsj",c=t("40049"),d=t("22700"),h=e=>{var{title:a,path:t}=e,h=(0,d.s0)();return(0,r.jsx)("div",{className:l,children:(0,r.jsx)("div",{className:o,children:(0,r.jsx)(c.Sx.Text,{icon:(0,r.jsx)(s.Z,{className:i}),onClick:()=>{h("..".concat(t))},className:n,children:a})})})},m=t("4186"),u=t("50959"),p="tree-select-yMxeQV",v="tree-select-dropdown-_CCX7B",x="filter-rank-ZozsQi",y="rest-tags-popover-IT2caQ",b="list-item-content-title-IjVIRX",g="dataTable-avfo7q",f="table-container-T8kKHU",j="title-MCRbwq",k="filter-Yw7HBe",N="text-TTNsBv",M="filter-item-H0QXH8",w=e=>{var a=document.createElement("span");a.style.fontSize="14px",a.style.fontWeight="600",a.innerText=e,document.body.appendChild(a);var t=a.offsetWidth;return document.body.removeChild(a),t},T=e=>{var{tableInfo:a,dimension:t=[]}=e,s=a.data[0].Scores;return[{title:"Models",dataIndex:"name",width:200,fixed:!0,sorter:(e,a)=>void 0===e||void 0===a?0:String(e.ModelDisplayName).localeCompare(String(a.ModelDisplayName)),render:e=>(0,r.jsx)("div",{className:b,children:(0,r.jsx)(c.Sx.Text,{ellipsis:{showTooltip:!0,rows:3},style:{wordBreak:"break-all"},children:e})})},...(0,u.useMemo)(()=>Object.keys(s).filter(e=>t.includes(e)).map(e=>({title:e,dataIndex:e,children:Object.keys(s[e]).map(a=>({title:a,dataIndex:[e,a].join("."),width:w(a)+50,sorter:(t,r)=>void 0===t||void 0===r?0:Number(t[e][a])-Number(r[e][a])>0?1:-1,render:e=>Number(e)?Number(e).toFixed(3):"-"}))})),[a,t])]},C=t("22312"),S=t("40413"),O=t("18809"),P="trigger-select-NBrN6A",Z=e=>{var{value:a,onChange:t}=e,s=(0,S._)(e,["value","onChange"]);return(0,r.jsx)(c.Ph,(0,C._)((0,m._)({},s),{borderless:!1,placeholder:"\u8BF7\u9009\u62E9",style:(0,m._)({height:20,background:"rgba(255, 255, 255, 0.1)",border:"unset",maxWidth:"160px"},s.style||{}),className:P,value:a,onChange:e=>{null==t||t(e)},arrowIcon:(0,r.jsx)(O.Z,{style:{fontSize:12,color:"#fff"}})}))},G=t("95302"),K=t("60710"),A=t("29981"),I=t.n(A),R=t("31761"),E=t("83381"),_=t("42949"),B=(0,E.Z)(()=>{var[e,a]=(0,_.Z)({rankType:"overall",rankTypeKeyPath:"match.tables.overall",models:[]});return{modalState:e,setModalState:a}}),L=()=>{var{modalState:e,setModalState:a}=B.useContext(),[t,s]=(0,u.useState)(),l=(0,u.useRef)(null),[o]=(0,K.lr)(),n=o.get("rank")||"",i=o.get("models")||"",d=(0,u.useMemo)(()=>(0,R.Z)(G.G,e.rankTypeKeyPath).data.map(e=>e.Method||e.Model||""),[G.G,e.rankTypeKeyPath]),h=(0,u.useMemo)(()=>{var e=[];return Object.keys(G.G).map(a=>{e.push({label:G.G[a].name,value:a,key:"".concat(a,".tables.default"),children:Object.keys(G.G[a].tables).length>1?Object.entries(G.G[a].tables).map(e=>{var[t,r]=e;return{label:r.name,value:"".concat(a,".").concat(t),key:"".concat(a,".tables.").concat(t)}}):void 0})}),e},[G.G]),b=(0,u.useMemo)(()=>d.map(e=>({label:e,value:e})),[d]),w=(0,u.useMemo)(()=>{var a=[];return s(a=Object.keys((0,R.Z)(G.G,e.rankTypeKeyPath).data[0].Scores)),a.map(e=>({label:e,value:e}))},[G.G,e.rankTypeKeyPath]);(0,u.useEffect)(()=>{if(n){var[e,t="default"]=n.split(".");a({rankType:n,rankTypeKeyPath:"".concat(e,".tables.").concat(t),models:i?i.split("~"):d})}},[n,i,d]);var C=T({tableInfo:(0,R.Z)(G.G,e.rankTypeKeyPath),dimension:t}),S=(0,u.useMemo)(()=>(0,R.Z)(G.G,e.rankTypeKeyPath).data.filter(a=>{var t=a.Method||a.Model||"";return 0===e.models.length||e.models.includes(t)}).map(e=>(0,m._)({name:e.Method||e.Model},e.Scores)),[G.G,e.rankTypeKeyPath,e.models]);return(0,r.jsxs)("div",{ref:l,className:g,children:[(0,r.jsx)("div",{className:j,children:(0,r.jsxs)(c.T,{children:[(0,r.jsx)(c.Sx.Title,{heading:6,style:{margin:"10px 0"},children:"Data details"}),(0,r.jsx)("div",{className:I()(k,x),children:(0,r.jsxs)("div",{className:M,children:[(0,r.jsx)("div",{className:N,children:"Lists"}),(0,r.jsx)(c.mP,{className:p,size:"small",value:e.rankType,expandAll:!0,arrowIcon:(0,r.jsx)(O.Z,{style:{fontSize:12,color:"#fff"}}),onChange:(e,a)=>{var t;if(Object.keys((null===(t=G.G[e])||void 0===t?void 0:t.tables)||{}).length<=1){console.log("changeRank:",e,a.key),o.set("rank",a.key.replace(".tables","").replace(".default","")),o.delete("models");var r=new URL(location.href);r.hash=r.hash.replace(/(:?\?).+$/,"?".concat(o.toString())),window.location.href=r.toString()}},treeData:h,dropdownClassName:v})]})}),(0,r.jsx)("div",{className:k,children:(0,r.jsxs)("div",{className:M,children:[(0,r.jsx)("div",{className:N,children:"Models"}),(0,r.jsx)(Z,{value:e.models,onChange:e=>{0===e.length?o.delete("models"):o.set("models",e.join("~"));var a=new URL(location.href);a.hash=a.hash.replace(/(:?\?).+$/,"?".concat(o.toString())),window.location.href=a.toString()},multiple:!0,optionList:b,maxTagCount:2,showRestTagsPopover:!0,restTagsPopoverProps:{position:"top",className:y},style:{maxWidth:"auto"}})]})}),(0,r.jsx)("div",{className:k,children:(0,r.jsxs)("div",{className:M,children:[(0,r.jsx)("div",{className:N,children:"Dimension"}),(0,r.jsx)(Z,{value:t,onChange:e=>{s(e)},multiple:!0,optionList:w,maxTagCount:2,showRestTagsPopover:!0,restTagsPopoverProps:{position:"top",className:y},style:{maxWidth:"auto"}})]})})]})}),(0,r.jsx)("div",{className:f,children:(0,r.jsx)(c.iA,{scroll:{x:"100%",y:450},columns:C,dataSource:S,loading:!1,pagination:!1,bordered:!0},"".concat(JSON.stringify(JSON.stringify(C)),"_").concat(e.rankTypeKeyPath))})]})},D={dimensionsTable:"dimensionsTable-A2L1K0",title:"title-wm6gEQ",echarts:"echarts-uKWZZI",chart:"chart-hMM_7x",tagContainer:"tagContainer-Rucu5Y",label:"label-uANBJO",labelName:"labelName-g00lou",selected:"selected-Dj1uc7",chartContainer:"chartContainer-BuGC1U"},J=t("6538"),W=t("77310"),z=(e,a)=>{var t=(0,u.useMemo)(()=>{var a=[];return null==e||e.forEach(e=>{Object.keys(e.Scores).forEach(e=>{a.push(e)})}),(0,W.Z)(a)},[e,a]),r=(0,u.useMemo)(()=>null==e?void 0:e.sort((e,a)=>(e.Method||e.Model||"").localeCompare(a.Method||a.Model||"")).map(e=>e.Method||e.Model||""),[e]),s=(0,u.useMemo)(()=>{var t={};return null==e||e.forEach(e=>{var r=e.Scores;Object.keys(r).forEach(e=>{if((r[e][a||""]||0)>=(t[e]||0)){var s=r[e][a||""]||1;t[e]=s+.2*s}})}),Object.keys(t).sort((e,a)=>e.localeCompare(a)).map(e=>({name:e,max:t[e]||1}))},[e,a]),l=(0,u.useMemo)(()=>null==e?void 0:e.sort((e,a)=>(e.Method||e.Model||"").localeCompare(a.Method||a.Model||"")).map(e=>({name:e.Method||e.Model||"",value:Object.keys(e.Scores).sort().map(t=>e.Scores[t][a||""]||0)})),[e,a]);return 0===s.length?{}:{legend:{data:r,bottom:"0",type:"scroll",left:"10%"},tooltip:{trigger:"item",position:"right",formatter(e){var a=t.map((a,t)=>"\n              <tr>\n                <td>".concat(a,":</td>\n                <td>").concat(e.value[t],"</td>\n              </tr>\n            ")).join("");return"\n          <div>\n            <h4>".concat(e.name,"</h4>\n            <table>\n                ").concat(a,"\n            </table>\n          </div>\n        ")}},grid:{top:20},radar:{center:["50%","55%"],indicator:s,name:{formatter:e=>e.replace(/(.{15})/g,"$1\n")},axisLabel:{width:50,overflow:"truncate",align:"left",verticalAlign:"middle"},nameGap:15},series:[{name:"compare",type:"radar",tooltip:{trigger:"item"},areaStyle:{},data:l}]}},Q=(e,a)=>{var t,r=(0,u.useMemo)(()=>{var a=[];return null==e||e.forEach(e=>{Object.keys(e.Scores).forEach(e=>{a.push(e)})}),(0,W.Z)(a).sort((e,a)=>e.localeCompare(a))},[e,a]),s=r.sort((e,a)=>e.localeCompare(a)),l={},o=90,n="left",i="middle",c="insideBottom",d=15,h={show:!0,position:c,distance:d,align:n,verticalAlign:i,rotate:o,formatter:"{c}",fontSize:12,rich:{name:{}}};Object.values(e||{}).forEach(e=>{l[e.Method||e.Model||""]=r.map(t=>{var r,s;return Number(null===(s=e.Scores[t])||void 0===s?void 0:null===(r=s[a||""])||void 0===r?void 0:r.toFixed(2))})});var m=null===(t=Object.values(l||{}))||void 0===t?void 0:t.length,p=Object.entries(l).map(e=>{var[a,t]=e;return{name:a,type:"bar",barGap:0,label:h,emphasis:{focus:"series"},data:t}});return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:Object.keys(l),bottom:"0",type:"scroll",x:"center"},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack"]},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:[{type:"category",axisTick:{show:!1},data:s,axisLabel:{show:!0,interval:0,width:50*m,overflow:"breakAll"}}],yAxis:[{type:"value"}],dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],realtime:!0,start:0,end:100,height:23,bottom:30,borderColor:"transparent",backgroundColor:"#f5f5f5",fillerColor:"transparent",brushSelect:!1},{type:"inside",xAxisIndex:[0]}],grid:{left:30,right:30,bottom:80},series:p}},H=()=>{var{modalState:e}=B.useContext(),[a,t]=(0,u.useState)(""),[s,l]=(0,u.useState)(450),o=(0,u.useRef)(null),n=(0,u.useMemo)(()=>{var a,t;return null===(t=(0,R.Z)(G.G,e.rankTypeKeyPath))||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.filter(a=>{var t=a.Method||a.Model||"";return 0===e.models.length||e.models.includes(t)})},[e.rankTypeKeyPath,e.models]),i=(0,u.useMemo)(()=>{var e,a=Object.keys(Object.values((null===(e=n[0])||void 0===e?void 0:e.Scores)||{})[0]||{});return t(a[0]),a},[n]);(0,u.useEffect)(()=>{o.current&&l(o.current.offsetHeight)},[!!o.current]);var d=z(n,a),h=Q(n,a);return(0,r.jsxs)("div",{className:D.dimensionsTable,children:[(0,r.jsxs)("div",{className:D.title,children:[(0,r.jsx)(c.Sx.Title,{heading:6,style:{margin:"10px 0"},children:"Evaluating metrics"}),(0,r.jsx)(c.T,{className:D.tagContainer,spacing:3,children:null==i?void 0:i.map((e,s)=>{var l=a===e;return(0,r.jsx)(c.Vp,{className:I()(D.label,{[D.selected]:l}),onClick:()=>{t(e)},children:(0,r.jsx)("div",{className:D.labelName,children:e})},"TagBtn_".concat(s))})})]}),(0,r.jsx)("div",{ref:o,className:I()(D.chartContainer,"transparent-scrollbar"),children:(0,r.jsxs)(c.T,{className:D.echarts,spacing:20,children:[(0,r.jsx)("div",{className:D.chart,children:(0,r.jsx)(J.Z,{option:d,opts:{width:"auto",height:s-30}},JSON.stringify(d||{}))}),(0,r.jsx)("div",{className:D.chart,style:{flex:1,minWidth:714},children:(0,r.jsx)(J.Z,{option:h,opts:{width:"auto",height:s-30}},JSON.stringify(h||{}))})]})})]})},U="main-OyymXR",V=()=>(console.log("RankDetail"),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h,{title:"Back to Rankings",path:"/"}),(0,r.jsx)(B.Provider,{children:(0,r.jsxs)("main",{className:U,children:[(0,r.jsx)(L,{}),(0,r.jsx)(H,{})]})})]}))}}]);